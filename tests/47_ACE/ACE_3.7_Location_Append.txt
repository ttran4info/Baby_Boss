#---------------------------------------------------------------------------------------
# Script Change Log
# 2017-10-03 : vkatkar : Created new script
#---------------------------------------------------------------------------------------

*** Settings ***
Resource        ACE_api_imports.txt
Force Tags      ACE_API    BATCH21    ACE3.7    OffshoreQA    #  Known_bug    CM-1742
Suite Setup     Remove New Geofence via DB      name=ACE_Regression_Location
Suite Teardown  Remove New Geofence via DB      name=ACE_Regression_Location


# https://wiki.4info.com/pages/viewpage.action?title=ACE+API+Documentation&spaceKey=Software#ACEAPIDocumentation-3.7LocationAppend
# API Name : 3.7 Location Append
# Method : POST
# URL : /ace/api/v2/report/create
# DESC : Location Append
# Request : .xlsx File is to be uploaded using 3.1 API
#           Please call 3.1 to upload file before calling this API
#           (This API searchs for the file with FileName at the Upload location as specified in the properties file.)
# rhino.ace_report


*** Variables ***


*** Keywords ***


*** Test Cases ***
#----------------------------------------------------------------------------------------------------------------
ACE.3.7_TC_01.1_Location Append (Valid URL and data, Accept)
    [Documentation]     Input : Run API to Location Append with valid URL and valid request parameters,
    ...                 Expected : API should get processed successfully with response code 200.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_011
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 segmentEntryList="-1:-1"
    ...                 response_code=200
    ...                 success=true
    [Tags]


ACE.3.7_TC_01.2_Location Append (invalid URL, Don't Accept)
    [Documentation]     Input : Run API to Location Append with invalid URL and valid request parameters,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${ret} =        Generate Random String  3       QATESTABCDEFGHIJKLMNOP
    Set Test Variable       ${reportName}             ACE_Regression_Location_${ret}
    Log     ${reportName}
    Location Append     url=/ace/api/v234/report/create
    ...                 fileName=${reportName}
    ...                 response_code=400
    ...                 success=false
    [Tags]    #  Known_bug       CM-1002
#----------------------------------------------------------------------------------------------------------------

ACE.3.7_TC_02.1_Location Append (email missing, Don't Accept)
    [Documentation]     Input : Run API to Location Append with missing email,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_021
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 email="MISSING"
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "email"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-006"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Request field email is missing"
    [Tags]


ACE.3.7_TC_02.2_Location Append (email : Invalid, don't accept)
    [Documentation]     Input : Run API to Location Append with invalid email,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_022
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 email="Test12#$%34"
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "email"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-005"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Invalid email format"
    [Tags]   # Known_bug    CM-1328


ACE.3.7_TC_02.3_Location Append (email : blank, don't accept)
    [Documentation]     Input : Run API to Location Append with blank email,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_023
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 email="${EMPTY}"
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "email"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-005"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Invalid email format"
    [Tags]   # Known_bug    CM-1328


ACE.3.7_TC_02.4_Location Append (email : null, don't accept)
    [Documentation]     Input : Run API to Location Append with null email,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_024
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 email=null
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "email"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-006"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Request field email is missing"
    [Tags]

#----------------------------------------------------------------------------------------------------------------

ACE.3.7_TC_03.1_Location Append (Existing File Name, don't accept)
    [Documentation]     Input : Run API to Location Append for Existing File Name,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_031
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 response_code=200
    ...                 success=true

    Location Append     fileName=${reportName}.xlsx
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "FileName"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-007"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "File Name / Report name already exists"
    [Tags]    #  Known_bug       CM-1553


ACE.3.7_TC_03.2_Location Append (File Name : Missing, don't accept)
    [Documentation]     Input : Run API to Location Append for missing File Name,
    ...                 Expected : API should not get processed successfully with response code 400.
    Location Append     fileName=MISSING
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "File"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-004"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Missing custom POI file or unable to read it."
    [Tags]    #  Known_bug       CM-1553


ACE.3.7_TC_03.3_Location Append (File Name : special characters, don't accept)
    [Documentation]     Input : Run API to Location Append for File Name contains special characters,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_033
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "File"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-013"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Invalid Format for File Name"
    [Tags]     Known_bug       CM-1553    EXCLUDE    #excluded as per comment in CM-1553


ACE.3.7_TC_03.4_Location Append (File Name : single space, accept)
    [Documentation]     Input : Run API to Location Append for File Name contains single space,
    ...                 Expected : API should get processed successfully with response code 200.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_034
    Log     ${reportName}
    Location Append     fileName=${reportName}_034.xlsx
    ...                 response_code=200
    ...                 success=true
    [Tags]


ACE.3.7_TC_03.5_Location Append (File Name : underscore, accept)
    [Documentation]     Input : Run API to Location Append for File Name contains underscore,
    ...                 Expected : API should get processed successfully with response code 200.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_035
    Log     ${reportName}
    Location Append     fileName=${reportName}_035.xlsx
    ...                 response_code=200
    ...                 success=true
    [Tags]


ACE.3.7_TC_03.6_Location Append (File Name : numbers, accept)
    [Documentation]     Input : Run API to Location Append for File Name contains numbers,
    ...                 Expected : API should get processed successfully with response code 200.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_036
    Log     ${reportName}
    Location Append     fileName=${reportName}_036.xlsx
    ...                 response_code=200
    ...                 success=true
    [Tags]



ACE.3.7_TC_03.7_Location Append (File Name : double spaces, don't accept)
    [Documentation]     Input : Run API to Location Append for File Name contains double spaces,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_037
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "File"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-013"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Invalid Format for File Name"
    [Tags]      Known_bug       CM-1553    EXCLUDE    #excluded as per comment in CM-1553


ACE.3.7_TC_03.8_Location Append (File Name : blank, don't accept)
    [Documentation]     Input : Run API to Location Append for blank File Name,
    ...                 Expected : API should not get processed successfully with response code 400.
    Location Append     fileName=${EMPTY}
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "File"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-004"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Missing custom POI file or unable to read it."
    [Tags]    #  Known_bug       CM-1553


ACE.3.7_TC_03.9_Location Append (File Name : null, don't accept)
    [Documentation]     Input : Run API to Location Append for null File Name,
    ...                 Expected : API should not get processed successfully with response code 400.
    Location Append     fileName=null
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "FileName"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-009"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "File extension missing"
    [Tags]    #  Known_bug       CM-1553

#----------------------------------------------------------------------------------------------------------------

ACE.3.7_TC_04.1_Location Append (dataSource : Missing, don't accept)
    [Documentation]     Input : Run API to Location Append for missing dataSource. As dataSource is a mandatory key,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_041
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 dataSource=MISSING
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "700-012"
    Json Value Should Equal     ${body}     /reason_desc            "Required field DataSource is missing"
    [Tags]


ACE.3.7_TC_04.2_Location Append (dataSource : Invalid, don't accept)
    [Documentation]     Input : Run API to Location Append for dataSource invalid,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_042
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 dataSource=465486488
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "700-016"
    Json Value Should Equal     ${body}     /reason_desc            "Invalid Data Source"
    [Tags]    #   Known_bug    CM-1328      CM-1124


ACE.3.7_TC_04.3_Location Append (dataSource : blank, don't accept)
    [Documentation]     Input : Run API to Location Append for blank dataSource,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_043
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 dataSource=""
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "700-012"
    Json Value Should Equal     ${body}     /reason_desc            "Required field DataSource is missing"
    [Tags]   #   Known_bug       CM-1124


ACE.3.7_TC_04.4_Location Append (dataSource : null, don't accept)
    [Documentation]     Input : Run API to Location Append for null dataSource,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_044
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 dataSource=null
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "700-012"
    Json Value Should Equal     ${body}     /reason_desc            "Required field DataSource is missing"
    [Tags]    #  Known_bug       CM-1124


ACE.3.7_TC_04.5_Location Append (dataSource : 9999, don't accept)
    [Documentation]     Input : Run API to Location Append for dataSource not exists i.e. 9999,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_045
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 dataSource=9999
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "700-016"
    Json Value Should Equal     ${body}     /reason_desc            "Invalid Data Source"
    [Tags]



ACE.3.7_TC_04.6_Location Append (dataSource : -25, don't accept)
    [Documentation]     Input : Run API to Location Append for dataSource -25,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_046
    Log     ${reportName}
    Location Append     fileName=${reportName}.xlsx
    ...                 dataSource=-25
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "700-016"
    Json Value Should Equal     ${body}     /reason_desc            "Invalid Data Source"
    [Tags]


#----------------------------------------------------------------------------------------------------------

ACE.3.7_TC_05.1_Location Append (groupId : Missing, don't accept)
    [Documentation]     Input : Run API to Location Append for missing groupId. As groupId is a mandatory key,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=    Get Time    year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}_051
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_051
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 groupId=MISSING
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code                "400-999"
    Json Value Should Equal     ${body}     /reason_desc                "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/reason_code       "700-002"
    Json Value Should Equal     ${body}     /errors/0/field             "Group Id"
    Json Value Should Equal     ${body}     /errors/0/reason_desc       "Required field groupID missing"
    [Tags]   # Known_bug    CM-1804    #  CM-1328


ACE.3.7_TC_05.2_Location Append (groupId : Invalid, don't accept)
    [Documentation]     Input : Run API to Location Append for groupId invalid,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=    Get Time    year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_052
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 groupId=Test12@#$%34
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code                "400-999"
    Json Value Should Equal     ${body}     /reason_desc                "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/reason_code       "600-001"
    Json Value Should Equal     ${body}     /errors/0/field             "Group Id"
    Json Value Should Equal     ${body}     /errors/0/reason_desc       "Invalid Group id."
    [Tags]       #    Known_bug     CM-1804    #  CM-1328       CM-1124


ACE.3.7_TC_05.3_Location Append (groupId : blank, don't accept)
    [Documentation]     Input : Run API to Location Append for blank groupId,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_053
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 groupId=${Empty}
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code                "400-999"
    Json Value Should Equal     ${body}     /reason_desc                "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/reason_code       "700-002"
    Json Value Should Equal     ${body}     /errors/0/field             "Group Id"
    Json Value Should Equal     ${body}     /errors/0/reason_desc       "Required field groupID missing"
    [Tags]       #   Known_bug     CM-1804    #  CM-1328       CM-1124


ACE.3.7_TC_05.4_Location Append (groupId : null, don't accept)
    [Documentation]     Input : Run API to Location Append for null groupId,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_054
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 groupId=null
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code                "400-999"
    Json Value Should Equal     ${body}     /reason_desc                "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/reason_code       "600-001"
    Json Value Should Equal     ${body}     /errors/0/field             "Group Id"
    Json Value Should Equal     ${body}     /errors/0/reason_desc       "Invalid Group id."
    [Tags]     #    Known_bug     CM-1804    #  CM-1328      CM-1124


ACE.3.7_TC_05.5_Location Append (groupId : 9999, don't accept)
    [Documentation]     Input : Run API to Location Append for groupId not exists i.e. 9999,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_055
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 groupId=9999
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc                "Validation Failure"
    Should Match Regexp         ${body}     "[{"reason_code":"700-019","reason_desc":"Invalid Segment Entry List","field":"segmentEntryList"},{"reason_code":"600-001","reason_desc":"Invalid Group id.","field":"Group Id"}]"
    [Tags]   # Known_bug     CM-1804    #  CM-1328


ACE.3.7_TC_05.6_Location Append (groupId : -25, don't accept)
    [Documentation]     Input : Run API to Location Append for groupId -25,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_056
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 email="${QA_DEFAULT_USER}"
    ...                 fileName=${reportName}.xlsx
    ...                 groupId=-25
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code                "400-999"
    Json Value Should Equal     ${body}     /reason_desc                "Validation Failure"
    Should Match Regexp         ${body}     "[{"reason_code":"700-019","reason_desc":"Invalid Segment Entry List","field":"segmentEntryList"},{"reason_code":"600-001","reason_desc":"Invalid Group id.","field":"Group Id"}]"
    [Tags]       #   Known_bug     CM-1804    #  CM-1328


#----------------------------------------------------------------------------------------------------------------

ACE.3.7_TC_06.1_Location Append (segmentSources : Missing, don't accept)
    [Documentation]     Input : Run API to Location Append for missing segmentSources. As segmentSources is a mandatory key,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_063
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentSources=MISSING
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Should Match Regexp    ${body}    {"reason_code":"700-023","reason_desc":"Missing SourceSegment ","field":"Segment Source"}
    [Tags]  #  Known_bug    CM-1328


ACE.3.7_TC_06.2_Location Append (segmentSources : Invalid, don't accept)
    [Documentation]     Input : Run API to Location Append for segmentSources invalid,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_062
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentSources=Test12@#$%34
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Should Match Regexp    ${body}    {"reason_code":"700-020","reason_desc":"Invalid SourceSegment ","field":"Segment Source"}
    [Tags]      #     Known_bug    CM-1328  #     CM-1124


ACE.3.7_TC_06.3_Location Append (segmentSources : blank, don't accept)
    [Documentation]     Input : Run API to Location Append for blank segmentSources,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_063
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentSources=${Empty}
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Should Match Regexp    ${body}    {"reason_code":"700-023","reason_desc":"Missing SourceSegment ","field":"Segment Source"}
    [Tags]        #  Known_bug    CM-1328       CM-1124


ACE.3.7_TC_06.4_Location Append (segmentSources : null, don't accept)
    [Documentation]     Input : Run API to Location Append for null segmentSources,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_064
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentSources=null
    ...                 response_code=400
    ...                 success=false
    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Should Match Regexp    ${body}    {"reason_code":"700-020","reason_desc":"Invalid SourceSegment ","field":"Segment Source"}
    [Tags]      #    Known_bug    CM-1328    #   CM-1124


#----------------------------------------------------------------------------------------------------------------

ACE.3.7_TC_07.1_Location Append (segmentEntryList : Missing, don't accept)
    [Documentation]     Input : Run API to Location Append for missing segmentEntryList,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_071
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentEntryList=MISSING
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "segmentEntryList"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-018"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Required field Segment Entry List is missing"
    [Tags]  #  Known_bug    CM-1328


ACE.3.7_TC_07.2_Location Append (segmentEntryList : Invalid, don't accept)
    [Documentation]     Input : Run API to Location Append for segmentEntryList invalid,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_072
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentEntryList="Test12@#$%34"
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "segmentEntryList"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-019"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Invalid Segment Entry List"
    [Tags]  # Known_bug    CM-1328


ACE.3.7_TC_07.3_Location Append (segmentEntryList : blank, don't accept)
    [Documentation]     Input : Run API to Location Append for blank segmentEntryList,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_073
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentEntryList=""
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "segmentEntryList"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-018"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Required field Segment Entry List is missing"
    [Tags]   # Known_bug    CM-1328


ACE.3.7_TC_07.4_Location Append (segmentEntryList : null, don't accept)
    [Documentation]     Input : Run API to Location Append for null segmentEntryList,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_074
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentEntryList=null
    ...                 response_code=400
    ...                 success=false

    Json Value Should Equal     ${body}     /reason_code            "400-999"
    Json Value Should Equal     ${body}     /reason_desc            "Validation Failure"
    Json Value Should Equal     ${body}     /errors/0/field         "segmentEntryList"
    Json Value Should Equal     ${body}     /errors/0/reason_code   "700-018"
    Json Value Should Equal     ${body}     /errors/0/reason_desc   "Required field Segment Entry List is missing"
    [Tags]  #  Known_bug    CM-1328


ACE.3.7_TC_07.5_Location Append (segmentEntryList : When all POIs in the category are chosen, don't accept)
    [Documentation]     Input : Run API to Location Append for target_poi_name is -1 at segmentEntryList,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_075
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentEntryList="50:-1"
    ...                 response_code=400
    ...                 success=false
    [tags]  #  Known_bug    CM-1328


ACE.3.7_TC_07.6_Location Append (segmentEntryList : Comma separated list of POIs (Points Of Interest) around which the Geofence is to be built., don't accept)
    [Documentation]     Input : Run API to Location Append for Comma separated list of POIs (Points Of Interest) around which the Geofence is to be built.,
    ...                 Expected : API should not get processed successfully with response code 400.
    ${yyyy}    ${mm}    ${dd}    ${hours}   ${minutes}   ${seconds}=                      Get Time            year,month,day,hours,minutes,seconds
    Set Test Variable   ${start_date}           ${mm}${dd}${yyyy}_${hours}${minutes}${seconds}
    Set Test Variable       ${reportName}             SampleGeocodingFile_${start_date}_076
    Log     ${reportName}
    Location Append     url=/ace/api/v2/report/create
    ...                 fileName=${reportName}.xlsx
    ...                 segmentEntryList="50:182,50:1995"
    ...                 response_code=400
    ...                 success=false
    [tags]   # Known_bug    CM-1328


#----------------------------------------------------------------------------------------------------------------
