*** Settings ***
Resource             frequency_cap_imports.txt
Force Tags           FREQUENCY_CAP    BATCH12	PUBMATIC 	

*** variables ***
 #app_id_01 is the app id for device frequency
 #qpp_id_03 is the app id for ip freqency
 ${app_id_01}					12458
 ${app_id_03}					12460
 ${device_fc_agid_banner}		36041
 ${ip_fc_agid_banner}			36047 
*** Test Cases ***
# 

Frequency Cap for Device ID, Stop serving after X times idfa
	   ${random_device_id}=         Generate Random String 		32		abcdef0123456789
	   ${random_device_id_sha1}=	Generate Random String 		40		abcdef0123456789
	  
	   Run Keyword If 			'${CLEAR_ID}' == 'ON'			   Set Test Variable    ${data}   		  {"id":"16B537C7-CBA5-4E66-B4BB-35723A7AADF9","imp":[{"id":"1","tagid":"183942","banner":{"w":320,"h":50,"pos":1,"topframe":0,"battr":[3,8,10,1,6,5,44,9,13,14],"api":[3,5]}}],"app":{"id":"${app_id_01}","name":"theScore","ver":"4.6.2","bundle":"xiphone.thescore.com","domain":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","cat":["IAB9","IAB12"],"paid":0,"storeurl":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","publisher":{"id":"70819"}},"device":{"dpidsha1":"1D4126ED65889F108524935BBE5CC7FDD994A195","ip":"173.52.217.93","ua":"Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70","carrier":"Verizon Internet Services","language":"en-us","make":"Apple","model":"iPhone","os":"iOS","Osv":"8","osv":"8","js":1,"devicetype":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"NY","city":"Suffern","metro":"501","lat":41.1086998,"lon":-74.1357346,"type":1,"zip":"10901"},"ext":{"idfa":"${random_device_id}","hash":1,"res":"320x568","pf":4}},"user":{"geo":{"lat":41.1086998,"lon":-74.1357346,"type":1,"country":"US","region":"NY","city":"Chestnut Ridge"}},"badv":["18exgfs.com","gohookup.com"]}
	   Run Keyword If 			'${CLEAR_ID}' == 'OFF'			   Set Test Variable    ${data}   		  {"id":"16B537C7-CBA5-4E66-B4BB-35723A7AADF9","imp":[{"id":"1","tagid":"183942","banner":{"w":320,"h":50,"pos":1,"topframe":0,"battr":[3,8,10,1,6,5,44,9,13,14],"api":[3,5]}}],"app":{"id":"${app_id_01}","name":"theScore","ver":"4.6.2","bundle":"xiphone.thescore.com","domain":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","cat":["IAB9","IAB12"],"paid":0,"storeurl":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","publisher":{"id":"70819"}},"device":{"dpidsha1":"${random_device_id_sha1}","ip":"173.52.217.93","ua":"Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70","carrier":"Verizon Internet Services","language":"en-us","make":"Apple","model":"iPhone","os":"iOS","Osv":"8","osv":"8","js":1,"devicetype":1,"geo":{"country":"US","region":"NY","city":"Suffern","metro":"501","lat":41.1086998,"lon":-74.1357346,"type":1,"zip":"10901"},"ext":{"idfa":"6A0DEA20-9240-439E-BE66-E0845E7287BB","hash":1,"res":"320x568","pf":4}},"user":{"geo":{"lat":41.1086998,"lon":-74.1357346,"type":1,"country":"US","region":"NY","city":"Chestnut Ridge"}},"badv":["18exgfs.com","gohookup.com"]}

	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${device_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO
  
Frequency Cap for Device ID, Continue serving X times with new idfa
	   ${random_device_id}=         Generate Random String 		32		ABCDEF0123456789
	   ${random_device_id_sha1}=	Generate Random String 		40		ABCDEF0123456789	  
	   Run Keyword If 			'${CLEAR_ID}' == 'ON'			   Set Test Variable    ${data}   		  {"id":"16B537C7-CBA5-4E66-B4BB-35723A7AADF9","imp":[{"id":"1","tagid":"183942","banner":{"w":320,"h":50,"pos":1,"topframe":0,"battr":[3,8,10,1,6,5,44,9,13,14],"api":[3,5]}}],"app":{"id":"${app_id_01}","name":"theScore","ver":"4.6.2","bundle":"xiphone.thescore.com","domain":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","cat":["IAB9","IAB12"],"paid":0,"storeurl":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","publisher":{"id":"70819"}},"device":{"dpidsha1":"1D4126ED65889F108524935BBE5CC7FDD994A195","ip":"173.52.217.93","ua":"Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70","carrier":"Verizon Internet Services","language":"en-us","make":"Apple","model":"iPhone","os":"iOS","Osv":"8","osv":"8","js":1,"devicetype":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"NY","city":"Suffern","metro":"501","lat":41.1086998,"lon":-74.1357346,"type":1,"zip":"10901"},"ext":{"idfa":"${random_device_id}","hash":1,"res":"320x568","pf":4}},"user":{"geo":{"lat":41.1086998,"lon":-74.1357346,"type":1,"country":"US","region":"NY","city":"Chestnut Ridge"}},"badv":["18exgfs.com","gohookup.com"]}
	   Run Keyword If 			'${CLEAR_ID}' == 'OFF'			   Set Test Variable    ${data}   		  {"id":"16B537C7-CBA5-4E66-B4BB-35723A7AADF9","imp":[{"id":"1","tagid":"183942","banner":{"w":320,"h":50,"pos":1,"topframe":0,"battr":[3,8,10,1,6,5,44,9,13,14],"api":[3,5]}}],"app":{"id":"${app_id_01}","name":"theScore","ver":"4.6.2","bundle":"xiphone.thescore.com","domain":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","cat":["IAB9","IAB12"],"paid":0,"storeurl":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","publisher":{"id":"70819"}},"device":{"dpidsha1":"${random_device_id_sha1}","ip":"173.52.217.93","ua":"Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70","carrier":"Verizon Internet Services","language":"en-us","make":"Apple","model":"iPhone","os":"iOS","Osv":"8","osv":"8","js":1,"devicetype":1,"geo":{"country":"US","region":"NY","city":"Suffern","metro":"501","lat":41.1086998,"lon":-74.1357346,"type":1,"zip":"10901"},"ext":{"idfa":"6A0DEA20-9240-439E-BE66-E0845E7287BB","hash":1,"res":"320x568","pf":4}},"user":{"geo":{"lat":41.1086998,"lon":-74.1357346,"type":1,"country":"US","region":"NY","city":"Chestnut Ridge"}},"badv":["18exgfs.com","gohookup.com"]}

	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${device_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO

Frequency Cap for Device ID, Stop serving after X times otherdeviceid
	   ${random_device_id}=         Generate Random String 		32		abcdef0123456789
	   ${random_device_id_sha1}=	Generate Random String 		40		abcdef0123456789
	  
	   Run Keyword If 			'${CLEAR_ID}' == 'ON'			   Set Test Variable    ${data} 		{"id":"FCE09F60-4B2E-400C-B110-4361521DE0FF","imp":[{"id":"1","tagid":"130705","banner":{"w":320,"h":50,"topframe":0,"api":[3]}}],"app":{"id":"${app_id_01}","name":"oovoo:oovoomobileandroid","ver":"2.3.2","bundle":"xcom.oovoo","domain":"http://www.xxad.com","paid":0,"publisher":{"id":"62055"}},"device":{"dpidsha1":"16f2ef8da9afc3cd910f559116b1b3de73c26c5d","ip":"97.85.156.165","ua":"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SGH-T999 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30","carrier":"Charter Communications","make":"Samsung","model":"All Other Smart Phones","os":"Android","Osv":"4","osv":"4","devicetype":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"MO","city":"Florissant","metro":"609","lat":38.8144531,"lon":-90.3284988,"type":1,"zip":"63031"},"ext":{"otherdeviceid":"${random_device_id}","hash":1,"xff":"54.227.234.103","res":"-1x-1","pf":4,"cat":[13047514,10025712,14025812,12015511,13027011,11015411],"brand":[109,79,42,268,287,291,101,2018,1003,106],"loccatsrc":1}},"user":{"geo":{"lat":38.8144531,"lon":-90.3284988,"type":1,"country":"us","region":"mo","city":"florissant","zip":"63031-22","metro":"609"}},"bcat":["IAB25","IAB26","IAB3-7","IAB7-39","IAB8-18","IAB8-5","IAB9-9"],"badv":["ads.jdtracker.com","aim.com","c.tinyco.com","zoosk.com"]}
	   Run Keyword If 			'${CLEAR_ID}' == 'OFF'			   Set Test Variable    ${data}   		{"id":"FCE09F60-4B2E-400C-B110-4361521DE0FF","imp":[{"id":"1","tagid":"130705","banner":{"w":320,"h":50,"topframe":0,"api":[3]}}],"app":{"id":"${app_id_01}","name":"oovoo:oovoomobileandroid","ver":"2.3.2","bundle":"xcom.oovoo","domain":"http://www.xxad.com","paid":0,"publisher":{"id":"62055"}},"device":{"dpidsha1":"${random_device_id_sha1}","ip":"97.85.156.165","ua":"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SGH-T999 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30","carrier":"Charter Communications","make":"Samsung","model":"All Other Smart Phones","os":"Android","Osv":"4","osv":"4","devicetype":1,"geo":{"country":"US","region":"MO","city":"Florissant","metro":"609","lat":38.8144531,"lon":-90.3284988,"type":1,"zip":"63031"},"ext":{"otherdeviceid":"ae122b37-24d6-4800-80c7-4342f824e091","hash":1,"xff":"54.227.234.103","res":"-1x-1","pf":4,"cat":[13047514,10025712,14025812,12015511,13027011,11015411],"brand":[109,79,42,268,287,291,101,2018,1003,106],"loccatsrc":1}},"user":{"geo":{"lat":38.8144531,"lon":-90.3284988,"type":1,"country":"us","region":"mo","city":"florissant","zip":"63031-22","metro":"609"}},"bcat":["IAB25","IAB26","IAB3-7","IAB7-39","IAB8-18","IAB8-5","IAB9-9"],"badv":["ads.jdtracker.com","aim.com","c.tinyco.com","zoosk.com"]}

	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${device_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO
  
Frequency Cap for Device ID, Continue serving X times with new otherdeviceid
	   ${random_device_id}=         Generate Random String 		32		ABCDEF0123456789
	   ${random_device_id_sha1}=	Generate Random String 		40		ABCDEF0123456789
	  
	   Run Keyword If 			'${CLEAR_ID}' == 'ON'			   Set Test Variable    ${data} 		{"id":"FCE09F60-4B2E-400C-B110-4361521DE0FF","imp":[{"id":"1","tagid":"130705","banner":{"w":320,"h":50,"topframe":0,"api":[3]}}],"app":{"id":"${app_id_01}","name":"oovoo:oovoomobileandroid","ver":"2.3.2","bundle":"xcom.oovoo","domain":"http://www.xxad.com","paid":0,"publisher":{"id":"62055"}},"device":{"dpidsha1":"16f2ef8da9afc3cd910f559116b1b3de73c26c5d","ip":"97.85.156.165","ua":"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SGH-T999 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30","carrier":"Charter Communications","make":"Samsung","model":"All Other Smart Phones","os":"Android","Osv":"4","osv":"4","devicetype":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"MO","city":"Florissant","metro":"609","lat":38.8144531,"lon":-90.3284988,"type":1,"zip":"63031"},"ext":{"otherdeviceid":"${random_device_id}","hash":1,"xff":"54.227.234.103","res":"-1x-1","pf":4,"cat":[13047514,10025712,14025812,12015511,13027011,11015411],"brand":[109,79,42,268,287,291,101,2018,1003,106],"loccatsrc":1}},"user":{"geo":{"lat":38.8144531,"lon":-90.3284988,"type":1,"country":"us","region":"mo","city":"florissant","zip":"63031-22","metro":"609"}},"bcat":["IAB25","IAB26","IAB3-7","IAB7-39","IAB8-18","IAB8-5","IAB9-9"],"badv":["ads.jdtracker.com","aim.com","c.tinyco.com","zoosk.com"]}
	   Run Keyword If 			'${CLEAR_ID}' == 'OFF'			   Set Test Variable    ${data}   		{"id":"FCE09F60-4B2E-400C-B110-4361521DE0FF","imp":[{"id":"1","tagid":"130705","banner":{"w":320,"h":50,"topframe":0,"api":[3]}}],"app":{"id":"${app_id_01}","name":"oovoo:oovoomobileandroid","ver":"2.3.2","bundle":"xcom.oovoo","domain":"http://www.xxad.com","paid":0,"publisher":{"id":"62055"}},"device":{"dpidsha1":"${random_device_id_sha1}","ip":"97.85.156.165","ua":"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SGH-T999 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30","carrier":"Charter Communications","make":"Samsung","model":"All Other Smart Phones","os":"Android","Osv":"4","osv":"4","devicetype":1,"geo":{"country":"US","region":"MO","city":"Florissant","metro":"609","lat":38.8144531,"lon":-90.3284988,"type":1,"zip":"63031"},"ext":{"otherdeviceid":"ae122b37-24d6-4800-80c7-4342f824e091","hash":1,"xff":"54.227.234.103","res":"-1x-1","pf":4,"cat":[13047514,10025712,14025812,12015511,13027011,11015411],"brand":[109,79,42,268,287,291,101,2018,1003,106],"loccatsrc":1}},"user":{"geo":{"lat":38.8144531,"lon":-90.3284988,"type":1,"country":"us","region":"mo","city":"florissant","zip":"63031-22","metro":"609"}},"bcat":["IAB25","IAB26","IAB3-7","IAB7-39","IAB8-18","IAB8-5","IAB9-9"],"badv":["ads.jdtracker.com","aim.com","c.tinyco.com","zoosk.com"]}

	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${device_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO

Frequency Cap for Device ID, Stop serving after X times androidadvid
	   ${random_device_id}=         Generate Random String 		32		abcdef0123456789
	   ${random_device_id_sha1}=	Generate Random String 		40		abcdef0123456789
	  
	   Run Keyword If 			'${CLEAR_ID}' == 'ON'			   Set Test Variable    ${data}   		  {"id":"290C2C6A-3DA3-43D8-AAAC-8D4968CCE6FB","imp":[{"id":"1","tagid":"36852","banner":{"w":320,"h":50,"topframe":1,"battr":[1,3,6,8,9,10,14]}}],"app":{"id":"${app_id_01}","domain":"http://www.xpremiummobilenetwork.com","publisher":{"id":"33161"}},"device":{"dpidsha1":"1D4126ED65889F108524935BBE5CC7FDD994A195","ip":"66.87.129.83","ua":"Mozilla/5.0 (Linux; Android 4.4.2; LGLS885 Build/KOT49I.LS885ZV5) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36","carrier":"Sprint PCS","language":"en-us","make":"Generic","os":"Android","Osv":"2","osv":"2","js":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"VA","city":"Newport News","metro":"544","lat":38.9497986,"lon":-77.0156021,"type":2,"zip":"23602"},"ext":{"androidadvid":"${random_device_id}","hash":1,"xff":"66.87.129.83","pf":5}},"user":{"keywords":"Puzzle,Games,Trivia","geo":{"country":"USA"}},"badv":["18exgfs.com","gohookup.com"]}
	   Run Keyword If 			'${CLEAR_ID}' == 'OFF'			   Set Test Variable    ${data}   		  {"id":"290C2C6A-3DA3-43D8-AAAC-8D4968CCE6FB","imp":[{"id":"1","tagid":"36852","banner":{"w":320,"h":50,"topframe":1,"battr":[1,3,6,8,9,10,14]}}],"app":{"id":"${app_id_01}","domain":"http://www.xpremiummobilenetwork.com","publisher":{"id":"33161"}},"device":{"dpidsha1":"${random_device_id_sha1}","ip":"66.87.129.83","ua":"Mozilla/5.0 (Linux; Android 4.4.2; LGLS885 Build/KOT49I.LS885ZV5) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36","carrier":"Sprint PCS","language":"en-us","make":"Generic","os":"Android","Osv":"2","osv":"2","js":1,"geo":{"country":"US","region":"VA","city":"Newport News","metro":"544","lat":38.9497986,"lon":-77.0156021,"type":2,"zip":"23602"},"ext":{"androidadvid":"74dd6f83-4b38-4f01-8f94-aaf68201d6ae","hash":1,"xff":"66.87.129.83","pf":5}},"user":{"keywords":"Puzzle,Games,Trivia","geo":{"country":"USA"}},"badv":["18exgfs.com","gohookup.com"]}

	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${device_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO
  
Frequency Cap for Device ID, Continue serving X times with new androidadvid
	   ${random_device_id}=         Generate Random String 		32		ABCDEF0123456789
	   ${random_device_id_sha1}=	Generate Random String 		40		ABCDEF0123456789	  
	   Run Keyword If 			'${CLEAR_ID}' == 'ON'			   Set Test Variable    ${data}   		  {"id":"290C2C6A-3DA3-43D8-AAAC-8D4968CCE6FB","imp":[{"id":"1","tagid":"36852","banner":{"w":320,"h":50,"topframe":1,"battr":[1,3,6,8,9,10,14]}}],"app":{"id":"${app_id_01}","domain":"http://www.xpremiummobilenetwork.com","publisher":{"id":"33161"}},"device":{"dpidsha1":"1D4126ED65889F108524935BBE5CC7FDD994A195","ip":"66.87.129.83","ua":"Mozilla/5.0 (Linux; Android 4.4.2; LGLS885 Build/KOT49I.LS885ZV5) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36","carrier":"Sprint PCS","language":"en-us","make":"Generic","os":"Android","Osv":"2","osv":"2","js":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"VA","city":"Newport News","metro":"544","lat":38.9497986,"lon":-77.0156021,"type":2,"zip":"23602"},"ext":{"androidadvid":"${random_device_id}","hash":1,"xff":"66.87.129.83","pf":5}},"user":{"keywords":"Puzzle,Games,Trivia","geo":{"country":"USA"}},"badv":["18exgfs.com","gohookup.com"]}
	   Run Keyword If 			'${CLEAR_ID}' == 'OFF'			   Set Test Variable    ${data}   		  {"id":"290C2C6A-3DA3-43D8-AAAC-8D4968CCE6FB","imp":[{"id":"1","tagid":"36852","banner":{"w":320,"h":50,"topframe":1,"battr":[1,3,6,8,9,10,14]}}],"app":{"id":"${app_id_01}","domain":"http://www.xpremiummobilenetwork.com","publisher":{"id":"33161"}},"device":{"dpidsha1":"${random_device_id_sha1}","ip":"66.87.129.83","ua":"Mozilla/5.0 (Linux; Android 4.4.2; LGLS885 Build/KOT49I.LS885ZV5) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36","carrier":"Sprint PCS","language":"en-us","make":"Generic","os":"Android","Osv":"2","osv":"2","js":1,"geo":{"country":"US","region":"VA","city":"Newport News","metro":"544","lat":38.9497986,"lon":-77.0156021,"type":2,"zip":"23602"},"ext":{"androidadvid":"74dd6f83-4b38-4f01-8f94-aaf68201d6ae","hash":1,"xff":"66.87.129.83","pf":5}},"user":{"keywords":"Puzzle,Games,Trivia","geo":{"country":"USA"}},"badv":["18exgfs.com","gohookup.com"]}

	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${device_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO

	   
Frequency Cap for IP Stop serving after X times
	   ${random_2digits1}=         Generate Random String 		2		0123456789
	   ${random_2digits2}=         Generate Random String 		2		0123456789
	   ${random_2digits3}=         Generate Random String 		2		0123456789
	   ${random_2digits4}=         Generate Random String 		2		0123456789	   
	   set Test Variable    ${random_ip}					${random_2digits1}.${random_2digits2}.${random_2digits3}.${random_2digits4}
	   Set Test Variable    ${data}   		  {"id":"16B537C7-CBA5-4E66-B4BB-35723A7AADF9","imp":[{"id":"1","tagid":"183942","banner":{"w":320,"h":50,"pos":1,"topframe":0,"battr":[3,8,10,1,6,5,44,9,13,14],"api":[3,5]}}],"app":{"id":"${app_id_03}","name":"theScore","ver":"4.6.2","bundle":"xiphone.thescore.com","domain":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","cat":["IAB9","IAB12"],"paid":0,"storeurl":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","publisher":{"id":"70819"}},"device":{"dpidsha1":"1D4126ED65889F108524935BBE5CC7FDD994A195","ip":"${random_ip}","ua":"Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70","carrier":"Verizon Internet Services","language":"en-us","make":"Apple","model":"iPhone","os":"iOS","Osv":"8","osv":"8","js":1,"devicetype":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"NY","city":"Suffern","metro":"501","lat":41.1086998,"lon":-74.1357346,"type":1,"zip":"10901"},"ext":{"idfa":"1AF18A0A-813D-4C23-89A5-57F7A0C0EE22","hash":1,"res":"320x568","pf":4}},"user":{"geo":{"lat":41.1086998,"lon":-74.1357346,"type":1,"country":"US","region":"NY","city":"Chestnut Ridge"}},"badv":["18exgfs.com","gohookup.com"]}
	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${ip_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO	   

Frequency Cap for IP Continue serving X times with new IP
	   ${random_2digits1}=         Generate Random String 		2		0123456789
	   ${random_2digits2}=         Generate Random String 		2		0123456789
	   ${random_2digits3}=         Generate Random String 		2		0123456789
	   ${random_2digits4}=         Generate Random String 		2		0123456789	   
	   set Test Variable    ${random_ip}					${random_2digits1}.${random_2digits2}.${random_2digits3}.${random_2digits4}
	   Set Test Variable    ${data}   		  {"id":"16B537C7-CBA5-4E66-B4BB-35723A7AADF9","imp":[{"id":"1","tagid":"183942","banner":{"w":320,"h":50,"pos":1,"topframe":0,"battr":[3,8,10,1,6,5,44,9,13,14],"api":[3,5]}}],"app":{"id":"${app_id_03}","name":"theScore","ver":"4.6.2","bundle":"xiphone.thescore.com","domain":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","cat":["IAB9","IAB12"],"paid":0,"storeurl":"https://itunes.apple.com/ca/app/thescore/id285692706?mt=8","publisher":{"id":"70819"}},"device":{"dpidsha1":"1D4126ED65889F108524935BBE5CC7FDD994A195","ip":"${random_ip}","ua":"Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70","carrier":"Verizon Internet Services","language":"en-us","make":"Apple","model":"iPhone","os":"iOS","Osv":"8","osv":"8","js":1,"devicetype":1,"ifa": "${random_device_id}","geo":{"country":"US","region":"NY","city":"Suffern","metro":"501","lat":41.1086998,"lon":-74.1357346,"type":1,"zip":"10901"},"ext":{"idfa":"1AF18A0A-813D-4C23-89A5-57F7A0C0EE22","hash":1,"res":"320x568","pf":4}},"user":{"geo":{"lat":41.1086998,"lon":-74.1357346,"type":1,"country":"US","region":"NY","city":"Chestnut Ridge"}},"badv":["18exgfs.com","gohookup.com"]}
	   Validate RTB AdServed X Times     			api_key=${RTB_PUBMATIC_API}           data=${data}				requests=5         response_code=200         ad_expected=NA      adgroup_expected=${ip_fc_agid_banner}
	   Sleep     125s   
	   RTB Request 				API=${RTB_PUBMATIC_API}          data=${data}		response_code=204        submit_client_impression_event=NO	
	   