
*** Settings ***
Resource            ad_groups_and_targeting_imports.txt
Force Tags          ADVERTISERS     TARGETING      UI     AD_GROUP_SAVE          BATCH5  	EXCLUDE  	
Suite Setup               Run Keywords                      Start the Browser And Login To The Adhaven UI          Verify Default Page Information
Suite Teardown        	  Run Keywords                      Logout of AdHaven UI            Close All Browsers

*** Variables ***
${ADGROUP}                                     GENERIC_ONLINE_ADGROUP
${CAMPAIGN}                                    CP_Campaign
${ADVERTISER}                                  ${DEFAULT_ADVERTISER}

*** Keywords ***
Go To Test Adgroup
#         Go To Existing Adgroup       advertiser_name=${ADVERTISER}          campaign_name=${CAMPAIGN}       ag_adgroup_name=${ADGROUP}
		 Go To Existing Campaign 6.0			 advertiser_name=${ADVERTISER}          campaign_name=${CAMPAIGN} 
         Click Link       CHILD_ONLINE_GENERIC_111
         Sleep     2s
         Run Keyword And Ignore Error                   Confirm Action
         Sleep     3s

Additional Validation For Deadlock Issue
          Sleep    2s 
          Page Should Contain                   Advertisers
      	  Page Should Contain Link 			${ADGROUP}  				
          Capture Page Screenshot With Timestamp     
          
*** Test Cases ***

Clear Out All Targetting For ONLINE Adgroup
          Go To Test Adgroup
          Disable All Targetting But Placement For Online Adgroup
          Click Element                           ${AG_SAVE_BUTTON}
          Additional Validation For Deadlock Issue
          

Validate Number of Targeting Options For Existing ONLINE Adgroup
         Go To Test Adgroup
         ${targeting_options}=         Get Matching Xpath Count           //ul[@id='targeting']/li
         Log      Total Targeting Options: ${targeting_options}     
#         Element Should Not Be Visible          ${AG_TRAFFIC_TYPE_CHECKBOX}
#       6.0 Release now have Placement for online
##         Element Should Not Be Visible          ${AG_TARGETING_PLACEMENT_CHECKBOX}
#         Element Should Not Be Visible          ${AG_TARGETING_CONNECTION_TYPE_CHECKBOX} 
#         Element Should Not Be Visible          ${AG_TARGETING_CARRIER_CHECKBOX}
#         Element Should Not Be Visible          ${AG_TARGETING_INCOME_CHECKBOX}
#         Element Should Not Be Visible          ${AG_TARGETING_DEVICEOS_CHECKBOX}
#         Element Should Not Be Visible          ${AG_TARGETING_DEVICETYPE_CHECKBOX}
#         Element Should Not Be Visible          ${AG_TARGETING_DEVICEID_CHECKBOX}
#         Element Should Not Be Visible          ${AG_TARGETING_DEVICEMFG_CHECKBOX}
##         Element Should Not Be Visible          ${AG_TARGETING_AUDIENCE_CHECKBOX}
##         Element Should Not Be Visible          ${AG_TARGETING_GEOFENCE_CHECKBOX}
#         Page Should Contain Checkbox      ${AG_TARGETING_LOCATION_TYPE_CHECKBOX}

#7.9 since mobile/online page has merged, we ad the following check and remove the check above.
         Page Should Contain Checkbox      ${AG_TRAFFIC_TYPE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_CATEGORY_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_PLACEMENT_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DAYOFWEEK_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_TIMEOFDAY_CHECKBOX} 
         Page Should Contain Checkbox      ${AG_TARGETING_COUNTRY_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_REQUEST_STATE_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_REQUEST_DMA_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_ZIP_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_HH_STATE_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_HH_DMA_CHECKBOX} 
		 Page Should Contain Checkbox      ${AG_TARGETING_HH_ZIP_CHECKBOX}  
         Page Should Contain Checkbox      ${AG_TARGETING_CARRIER_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DEVICEOS_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DEVICETYPE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DEVICEMFG_CHECKBOX}
         Page Should Contain Checkbox 		${AG_TARGETING_APPNEXUS_OS_CHECKBOX}
         Page Should Contain Checkbox 		${AG_TARGETING_APPNEXUS_BROWSER_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_LOCATION_TYPE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_LANGUAGE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_PRIVATE_MARKETPLACES_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_VIDEO_STREAMING_POSITION_CHECKBOX}       
         Should Be Equal      ${targeting_options}        22
         # Release 6.3 23 with the addition of location (at home/away/etc)     
         Click Button      ${AG_CANCEL_BUTTON}       
         [Tags]              BUILD_SANITY                                    

#duplicate, exclude
Validate Targeting Options For Existing ONLINE Adgroup
         Go To Test Adgroup
         Page Should Contain Checkbox      ${AG_TARGETING_CATEGORY_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_PLACEMENT_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DAYOFWEEK_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_TIMEOFDAY_CHECKBOX} 
#         Page Should Contain Checkbox      ${AG_TARGETING_STATE_CHECKBOX} 
         Page Should Contain Checkbox      ${AG_TARGETING_COUNTRY_CHECKBOX}
#         Page Should Contain Checkbox      ${AG_TARGETING_DMA_CHECKBOX} 
		 Page Should Contain Checkbox      ${AG_TARGETING_REQUEST_STATE_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_REQUEST_DMA_CHECKBOX} 
         Page Should Contain Checkbox      ${AG_TARGETING_ZIP_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_HH_STATE_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_HH_DMA_CHECKBOX} 
         Page Should Not Contain Checkbox      ${AG_TARGETING_GENDER_CHECKBOX}
         Page Should Not Contain Checkbox      ${AG_TARGETING_AGE_RANGE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_APPNEXUS_OS_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_APPNEXUS_BROWSER_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_LOCATION_TYPE_CHECKBOX}
#         Page Should Contain Checkbox      ${AG_TARGETING_COOKIE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_LANGUAGE_CHECKBOX}
         Click Button      ${AG_CANCEL_BUTTON}
         #Exclude since is repetative of last test case
         [Tags]              BUILD_SANITY		Exclude
         

Validate Targeting Options For New ONLINE Adgroup
		Go To Existing Parent Adgroup 6.0	 advertiser_name=${ADVERTISER}          campaign_name=${CAMPAIGN}		parent_adgroup_name=GENERIC_ONLINE_ADGROUP
#		Go To Existing Campaign 6.0			 advertiser_name=${ADVERTISER}          campaign_name=${CAMPAIGN} 
#         Click Link             ${CREATE_ADGROUP_ONLINE_LINK_TOP_6_0}
#		 Click Link 			//a[@href='adGroupsAddEditNew.html?partnerId=183&campaignId=2290&adGroupBundleId=20352&pageMode=add&agLevel=child']
		Click Element 			xpath=/html/body/div[1]/div/div[3]/div[4]/form/dl[1]/table/tbody/tr[1]/td[2]/ul/li[2]


         Click Element			${AG_ONLINE_MOBILE_RADIO_ONLINE}
         Page Should Contain Checkbox      ${AG_TRAFFIC_TYPE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_CATEGORY_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_PLACEMENT_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DAYOFWEEK_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_TIMEOFDAY_CHECKBOX} 
         Page Should Contain Checkbox      ${AG_TARGETING_COUNTRY_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_REQUEST_STATE_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_REQUEST_DMA_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_ZIP_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_HH_STATE_CHECKBOX}
		 Page Should Contain Checkbox      ${AG_TARGETING_HH_DMA_CHECKBOX} 
		 Page Should Contain Checkbox      ${AG_TARGETING_HH_ZIP_CHECKBOX} 
         Page Should Contain Checkbox      ${AG_TARGETING_CARRIER_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DEVICEOS_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DEVICETYPE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_DEVICEMFG_CHECKBOX}
         Page Should Contain Checkbox 		${AG_TARGETING_APPNEXUS_OS_CHECKBOX}
         Page Should Contain Checkbox 		${AG_TARGETING_APPNEXUS_BROWSER_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_LOCATION_TYPE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_LANGUAGE_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_PRIVATE_MARKETPLACES_CHECKBOX}
         Page Should Contain Checkbox      ${AG_TARGETING_VIDEO_STREAMING_POSITION_CHECKBOX}            
         Click Button      ${AG_CANCEL_BUTTON}
         
         [Tags]              BUILD_SANITY 	

#Validate Adgroup Targeting Traffic Type
#        NOT FOR ONLINE
    

Validate Adgroup Targeting Category For Existing ONLINE Adgroup
        Go To Test Adgroup
        ${targetting_type}=        Set Variable          targetCategory
        ${checkbox}=                 Set Variable          ${AG_TARGETING_CATEGORY_CHECKBOX} 
        Page Should Contain Checkbox      ${AG_TARGETING_CATEGORY_CHECKBOX} 
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${AG_TARGETING_CATEGORY_CHECKBOX} 
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${AG_TARGETING_CATEGORY_CHECKBOX}
        Set Test Variable 		${xpath_category} 		/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[2]/div[5]/div[1]/ul/li
        Element Text Should Be                   xpath=${xpath_category}[1]               African American
        Element Text Should Be                   xpath=${xpath_category}[2]                Automotive
        Element Text Should Be                   xpath=${xpath_category}[3]                Beauty and Health
        Element Text Should Be                   xpath=${xpath_category}[4]               Business and Finance
        Element Text Should Be                   xpath=${xpath_category}[5]                Dating
        Element Text Should Be                   xpath=${xpath_category}[6]                Education
        Element Text Should Be                   xpath=${xpath_category}[7]                Entertainment
        Element Text Should Be                   xpath=${xpath_category}[8]               Family
        Element Text Should Be                   xpath=${xpath_category}[9]               Fashion
        Element Text Should Be                   xpath=${xpath_category}[10]             Food and Cooking
        Element Text Should Be                   xpath=${xpath_category}[11]             Gaming
        Element Text Should Be                   xpath=${xpath_category}[12]              Hispanic
        Element Text Should Be                   xpath=${xpath_category}[13]             Music
        Element Text Should Be                  xpath=${xpath_category}[14]              News
        Element Text Should Be                   xpath=${xpath_category}[15]              Shopping
        Element Text Should Be                   xpath=${xpath_category}[16]              Social Networking
        Element Text Should Be                   xpath=${xpath_category}[17]              Spanish Language
        Element Text Should Be                   xpath=${xpath_category}[18]              Sports
        Element Text Should Be                   xpath=${xpath_category}[19]             Technology
        Element Text Should Be                   xpath=${xpath_category}[20]              Travel
         # Loop through and try saving each option and verifying
        ${category_count}=         Get Matching Xpath Count           ${xpath_category} 
        Log    Category Count: ${category_count}
        Should Be Equal       ${category_count}     26
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${AG_TARGETING_CATEGORY_CHECKBOX} 
        \            ${label_text}=             Get Text           xpath=${xpath_category}[${index}]
        \            Log     Selection Text: ${label_text}
#        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
#        \            Enabled Checkbox ${checkbox_element}
		\			 Click Element 							xpath=${xpath_category}[${index}]/div[2]
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
#        \            Validate Checkbox Enabled ${checkbox_element}
        \            ${label_text_validate}=             Get Text           xpath=/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[2]/div[5]/div[2]/ul/li	
		\			Should Be Equal As Strings			${label_text}		${label_text_validate}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        
		[Tags]			
#Validate Adgroup Targeting Placements


#Validate Adgroup Targeting Day of Week
Validate Adgroup Targeting Day of Week For Existing ONLINE Adgroup
        Go To Test Adgroup
        ${targetting_type}=        Set Variable          targetDayofWeek
        ${checkbox}=                 Set Variable          ${AG_TARGETING_DAYOFWEEK_CHECKBOX} 
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label             sun
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label             mon
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[3]/label             tue
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[4]/label             wed
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[5]/label             thu
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[6]/label             fri
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[7]/label             sat        
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Day Of Week Count: ${type_count}
        Should Be Equal       ${type_count}    7
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        


#Validate Adgroup Targeting Time of Day
Validate Adgroup Targeting Time of Day For Existing ONLINE Adgroup
        Go To Test Adgroup
        ${targetting_type}=        Set Variable          targetTimeofDay
        ${checkbox}=                 Set Variable          ${AG_TARGETING_TIMEOFDAY_CHECKBOX} 
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Add Targeting Time Of Day             time_of_day_selection_from=7pm                   time_of_day_selection_to=1am               time_of_day_selection_timezone=Alaska
        Capture Page Screenshot With Timestamp
        Click Element                           ${AG_SAVE_BUTTON}
        Additional Validation For Deadlock Issue
        Go To Test Adgroup
        Validate Targeting Time Of Day       time_of_day_selection_from=7pm                   time_of_day_selection_to=1am               time_of_day_selection_timezone=Alaska
        Remove Targeting Time Of Day
        Click Element                           ${AG_SAVE_BUTTON}
        Additional Validation For Deadlock Issue
        Go To Test Adgroup
        Validate Checkbox Disabled ${checkbox}        


#Validate Adgroup Targeting State
Validate Adgroup Targeting State For Existing ONLINE Adgroup - Old (Household State)
        Go To Test Adgroup
        ${targetting_type}=        Set Variable           targetHouseholdState
        ${checkbox}=                 Set Variable          ${AG_TARGETING_HH_STATE_CHECKBOX} 
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Set Test Variable						${xpath_household_state}				/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[10]/div[4]/div[1]/ul/li
        Element Text Should Be                   xpath=${xpath_household_state}[1]             AL
        Element Text Should Be                   xpath=${xpath_household_state}[5]             CA
        Element Text Should Be                   xpath=${xpath_household_state}[10]           GA     
        Element Text Should Be                   xpath=${xpath_household_state}[15]          IA   
        Element Text Should Be                   xpath=${xpath_household_state}[20]           MD
        Element Text Should Be                   xpath=${xpath_household_state}[25]          MO
        Element Text Should Be                   xpath=${xpath_household_state}[30]           NJ
        Element Text Should Be                   xpath=${xpath_household_state}[35]           OH
        Element Text Should Be                   xpath=${xpath_household_state}[40]           SC
        Element Text Should Be                   xpath=${xpath_household_state}[45]           VT
        Element Text Should Be                   xpath=${xpath_household_state}[50]           WY
        Element Text Should Be                   xpath=${xpath_household_state}[55]           NL
        Element Text Should Be                   xpath=${xpath_household_state}[60]           PE
        Element Text Should Be                   xpath=${xpath_household_state}[63]           YT      
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           ${xpath_household_state}
        Log    State Count: ${type_count}
        Should Be Equal       ${type_count}    63
        #  Only looping through 5 states
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           xpath=${xpath_household_state}[${index}]
        \            Log     Selection Text: ${label_text}
#        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
#        \            Enabled Checkbox ${checkbox_element}
		\			Click Element									xpath=${xpath_household_state}[${index}]/div[2]	
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
#        \            Validate Checkbox Enabled ${checkbox_element}
        \            ${label_text_validate}=             Get Text           xpath=/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[10]/div[4]/div[2]/ul/li
        \            Capture Page Screenshot With Timestamp
        \			 Should Be Equal As Strings			${label_text}		${label_text_validate}		
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        
	[Tags]		
Validate Adgroup Targeting State For Existing ONLINE Adgroup - New (Request State)
		Go To Existing Parent Adgroup 6.0	 advertiser_name=${ADVERTISER}          campaign_name=${CAMPAIGN}		parent_adgroup_name=GENERIC_ONLINE_ADGROUP
		Click Element 			xpath=/html/body/div[1]/div/div[3]/div[4]/form/dl[1]/table/tbody/tr[1]/td[2]/ul/li[2]
        ${targetting_type}=        Set Variable           targetRequestState
        ${checkbox}=                 Set Variable          ${AG_TARGETING_REQUEST_STATE_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Set Test Variable						${xpath_household_state}				/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[10]/div[4]/div[1]/ul/li
        Element Text Should Be                   xpath=${xpath_household_state}[1]             AL
        Element Text Should Be                   xpath=${xpath_household_state}[5]             CA
        Element Text Should Be                   xpath=${xpath_household_state}[10]           GA     
        Element Text Should Be                   xpath=${xpath_household_state}[15]          IA   
        Element Text Should Be                   xpath=${xpath_household_state}[20]           MD
        Element Text Should Be                   xpath=${xpath_household_state}[25]          MO
        Element Text Should Be                   xpath=${xpath_household_state}[30]           NJ
        Element Text Should Be                   xpath=${xpath_household_state}[35]           OH
        Element Text Should Be                   xpath=${xpath_household_state}[40]           SC
        Element Text Should Be                   xpath=${xpath_household_state}[45]           VT
        Element Text Should Be                   xpath=${xpath_household_state}[50]           WY
        Element Text Should Be                   xpath=${xpath_household_state}[55]           NL
        Element Text Should Be                   xpath=${xpath_household_state}[60]           PE
        Element Text Should Be                   xpath=${xpath_household_state}[63]           YT      
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           ${xpath_household_state}
        Log    State Count: ${type_count}
        Should Be Equal       ${type_count}    63
        #  Only looping through 5 states
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           xpath=${xpath_household_state}[${index}]
        \            Log     Selection Text: ${label_text}
#        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
#        \            Enabled Checkbox ${checkbox_element}
		\			Click Element									xpath=${xpath_household_state}[${index}]/div[2]	
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
#        \            Validate Checkbox Enabled ${checkbox_element}
        \            ${label_text_validate}=             Get Text           xpath=/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[10]/div[4]/div[2]/ul/li
        \            Capture Page Screenshot With Timestamp
        \			 Should Be Equal As Strings			${label_text}		${label_text_validate}		
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        
	[Tags]		exclude
#Validate Adgroup Targeting Country
Validate Adgroup Targeting Country For Existing ONLINE Adgroup
        Go To Test Adgroup
        ${targetting_type}=        Set Variable          targetCountry
        ${checkbox}=                 Set Variable          ${AG_TARGETING_COUNTRY_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label             United States
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label             Canada
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Country Count: ${type_count}
        Should Be Equal       ${type_count}    4
        :FOR        ${index}      IN RANGE       1    ${type_count}+1
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        


#Validate Adgroup Targeting DMA
Validate Adgroup Targeting DMA For Existing ONLINE Adgroup - Old (Household DMA)
        Go To Test Adgroup
        ${targetting_type}=        Set Variable           targetHouseholdDMA
        ${checkbox}=                 Set Variable          ${AG_TARGETING_HH_DMA_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Set Test Variable	${xpath_dma}		/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[11]/div[5]/div[1]/ul/li
        Element Text Should Be                   xpath=${xpath_dma}[1]            Abilene-Sweetwater, TX (662)
        Element Text Should Be                   xpath=${xpath_dma}[10]           Augusta-Aiken, GA-SC (520)
        Element Text Should Be                   xpath=${xpath_dma}[20]           Binghamton, NY (502)
        Element Text Should Be                   xpath=${xpath_dma}[30]          Cedar Rapids-Waterloo-Iowa City & Dubuque, IA (637)
        Element Text Should Be                   xpath=${xpath_dma}[40]           Cincinnati, OH (515)
        Element Text Should Be                   xpath=${xpath_dma}[50]           Dallas-Ft. Worth, TX (623)
        Element Text Should Be                   xpath=${xpath_dma}[60]         Erie, PA (516)
        Element Text Should Be                   xpath=${xpath_dma}[70]           Ft. Wayne, IN (509)
        Element Text Should Be                   xpath=${xpath_dma}[80]           Greenwood-Greenville, MS (647)
        Element Text Should Be                   xpath=${xpath_dma}[90]           Idaho Falls-Pocatello (Jackson), ID-WY (758)
        Element Text Should Be                   xpath=${xpath_dma}[100]          Knoxville, TN (557)
        Element Text Should Be                  xpath=${xpath_dma}[150]          Portland-Auburn, ME (500)
        Element Text Should Be                   xpath=${xpath_dma}[200]          Wausau-Rhinelander, WI (705)
        Element Text Should Be                   xpath=${xpath_dma}[210]         Zanesville, OH (596)
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           ${xpath_dma}
        Log    DMA Count: ${type_count}
        Should Be Equal       ${type_count}    210
        #  Only looping through 5 states
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           xpath=${xpath_dma}[${index}]
        \            Log     Selection Text: ${label_text}
#        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
		\			Click Element 				xpath=${xpath_dma}[${index}]/div[2]
#        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
#        \            Validate Checkbox Enabled ${checkbox_element}
        \            ${label_text_validate}=             Get Text           xpath=/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[11]/div[5]/div[2]/ul/li
        \			Should Be Equal As Strings			${label_text}		${label_text_validate}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        
	[Tags]			
Validate Adgroup Targeting DMA For Existing ONLINE Adgroup - New (Request DMA)
        Go To Test Adgroup
        ${targetting_type}=        Set Variable           targetRequestDMA
        ${checkbox}=                 Set Variable          ${AG_TARGETING_REQUEST_DMA_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Set Test Variable	${xpath_dma}		/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[11]/div[5]/div[1]/ul/li
        Element Text Should Be                   xpath=${xpath_dma}[1]            Abilene-Sweetwater, TX (662)
        Element Text Should Be                   xpath=${xpath_dma}[10]           Augusta-Aiken, GA-SC (520)
        Element Text Should Be                   xpath=${xpath_dma}[20]           Binghamton, NY (502)
        Element Text Should Be                   xpath=${xpath_dma}[30]          Cedar Rapids-Waterloo-Iowa City & Dubuque, IA (637)
        Element Text Should Be                   xpath=${xpath_dma}[40]           Cincinnati, OH (515)
        Element Text Should Be                   xpath=${xpath_dma}[50]           Dallas-Ft. Worth, TX (623)
        Element Text Should Be                   xpath=${xpath_dma}[60]         Erie, PA (516)
        Element Text Should Be                   xpath=${xpath_dma}[70]           Ft. Wayne, IN (509)
        Element Text Should Be                   xpath=${xpath_dma}[80]           Greenwood-Greenville, MS (647)
        Element Text Should Be                   xpath=${xpath_dma}[90]           Idaho Falls-Pocatello (Jackson), ID-WY (758)
        Element Text Should Be                   xpath=${xpath_dma}[100]          Knoxville, TN (557)
        Element Text Should Be                  xpath=${xpath_dma}[150]          Portland-Auburn, ME (500)
        Element Text Should Be                   xpath=${xpath_dma}[200]          Wausau-Rhinelander, WI (705)
        Element Text Should Be                   xpath=${xpath_dma}[210]         Zanesville, OH (596)
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           ${xpath_dma}
        Log    DMA Count: ${type_count}
        Should Be Equal       ${type_count}    210
        #  Only looping through 5 states
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           xpath=${xpath_dma}[${index}]
        \            Log     Selection Text: ${label_text}
#        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
		\			Click Element 				xpath=${xpath_dma}[${index}]/div[2]
#        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
#        \            Validate Checkbox Enabled ${checkbox_element}
        \            ${label_text_validate}=             Get Text           xpath=/html/body/div[1]/div/div[3]/div[4]/form/dl[2]/dd/ul/li[11]/div[5]/div[2]/ul/li
        \			Should Be Equal As Strings			${label_text}		${label_text_validate}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        
	[Tags]	exclude
#Validate Adgroup Targeting Zip
Validate Adgroup Targeting Zip For Existing ONLINE Adgroup
        Go To Test Adgroup
        Run Keyword And Ignore Error                   Confirm Action
        Sleep      5s
        ${targetting_type}=        Set Variable          targetRequestZip
        Add Targeting Zip 95111
        Capture Page Screenshot With Timestamp
        Click Element                           ${AG_SAVE_BUTTON}
        Additional Validation For Deadlock Issue
        Go To Test Adgroup
        Run Keyword And Ignore Error                   Confirm Action
        Sleep      10s
        Validate Targeting Zip 95111
        Capture Page Screenshot With Timestamp
        Remove Targeting Zip
        Capture Page Screenshot With Timestamp
        Click Element                           ${AG_SAVE_BUTTON}
        Additional Validation For Deadlock Issue
        [Tags]       https://jira.adhaven.com/browse/ADH-4822


#Validate Adgroup Targeting Connection Type
#        NOT FOR ONLINE

#Validate Adgroup Targeting Carrier
#        NOT FOR ONLINE

#Validate Adgroup Targeting Gender
Validate Adgroup Targeting Gender For Existing ONLINE Adgroup
        Go To Test Adgroup
        ${targetting_type}=        Set Variable          targetGender
        ${checkbox}=                 Set Variable          ${AG_TARGETING_GENDER_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label             m
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label             f
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Gender Count: ${type_count}
        Should Be Equal       ${type_count}    2
        :FOR        ${index}      IN RANGE       1    ${type_count}+1
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \		      Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}        
		[Tags]   Exclude    6.16

#Validate Adgroup Targeting Age Range
Validate Adgroup Targeting Age Range For Existing ONLINE Adgroup
        Go To Test Adgroup
        ${targetting_type}=        Set Variable           targetAgeRange
        ${checkbox}=                 Set Variable          ${AG_TARGETING_AGE_RANGE_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label             Use data from Zip-to-Demo
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label             0-11
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[3]/label             12-17
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[4]/label             18-24
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[5]/label             25-34
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[6]/label             35-44
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[7]/label             45-54
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[8]/label             55+                                       
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Age Range Count: ${type_count}
        Should Be Equal       ${type_count}    8
        :FOR        ${index}      IN RANGE       2    4
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}      
		[Tags]   Exclude    6.16
		
Validate Adgroup Targeting Age Range For Existing ONLINE Adgroup With Zip-to-Demo
        Go To Test Adgroup
        ${targetting_type}=        Set Variable           targetAgeRange
        ${checkbox}=                 Set Variable          ${AG_TARGETING_AGE_RANGE_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label             Use data from Zip-to-Demo
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label             0-11
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[3]/label             12-17
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[4]/label             18-24
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[5]/label             25-34
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[6]/label             35-44
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[7]/label             45-54
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[8]/label             55+                                       
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Age Range Count: ${type_count}
        Should Be Equal       ${type_count}    8
        :FOR        ${index}      IN RANGE       2    4
        \            Enabled Checkbox ${checkbox}
        \            ${z2d_checkbox}=         Set Variable       //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/input
        \            ${label_text}=             Get Text              //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Enabled Checkbox ${z2d_checkbox}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Validate Checkbox Enabled ${z2d_checkbox}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}      
        [Tags]      https://jira.adhaven.com/browse/ADH-4813	Exclude    6.16

#Validate Adgroup Targeting Income
#        NOT FOR ONLINE

#Validate Adgroup Targeting Device OS
#        NOT FOR ONLINE

#Validate Adgroup Targeting Device Type
#        NOT FOR ONLINE

#Validate Adgroup Targeting Device ID
#        NOT FOR ONLINE

#Validate Adgroup Targeting Device Manufacturer
#        NOT FOR ONLINE

#Validate Adgroup Targeting Household Segment
#        NOT FOR ONLINE

#Validate Adgroup Targeting Geofence
#        NOT FOR ONLINE

Validate Adgroup Targeting AppNexus OS For Existing ONLINE Adgroup 
        Go To Test Adgroup
        ${targetting_type}=        Set Variable           targetAppNexusOperatingSystem
        ${checkbox}=                 Set Variable          ${AG_TARGETING_APPNEXUS_OS_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label               Linux
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label               Mac
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[3]/label               Unknown
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[4]/label               Windows (other versions)
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[5]/label               Windows 2000
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[6]/label               Windows 7
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[7]/label               Windows 8
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[8]/label               Windows Vista
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[9]/label               Windows XP
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[10]/label              Android
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[11]/label              Blackberry
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[12]/label              iPad
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[13]/label              iPhone
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[14]/label              iPod
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[15]/label              Windows Apps
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[16]/label              Windows Phone 7
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    OS Count: ${type_count}
        Should Be Equal       ${type_count}    16
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}      

Validate Adgroup Targeting AppNexus Browser For Existing ONLINE Adgroup 
        Go To Test Adgroup
        ${targetting_type}=        Set Variable           targetAppNexusBrowser
        ${checkbox}=                 Set Variable          ${AG_TARGETING_APPNEXUS_BROWSER_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label               Android
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label               BlackBerry
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[3]/label               Chrome (all versions)
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[4]/label               Edge
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[5]/label               Firefox (other versions)
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[6]/label               Firefox 3
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[7]/label               Firefox 4
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[8]/label               Internet Explorer (other versions)
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[9]/label               Internet Explorer 10
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[10]/label               Internet Explorer 11
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[11]/label              Internet Explorer 6
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[12]/label              Internet Explorer 7
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[13]/label              Internet Explorer 8
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[14]/label              Internet Explorer 9
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[15]/label              iPhone
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[16]/label              Opera (all versions)
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[17]/label              Opera Mobile
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[18]/label              Safari (all versions)
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[19]/label              Unknown
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Browsers Count: ${type_count}
        Should Be Equal       ${type_count}    19
        :FOR        ${index}      IN RANGE       1    3
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}      

Validate Adgroup Targeting Cookie For Existing ONLINE Adgroup 
       Go To Test Adgroup
        ${targetting_type}=        Set Variable          targetCookie
        ${checkbox}=                 Set Variable         ${AG_TARGETING_COOKIE_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Page Should Contain List           ${AG_TARGETING_COOKIE_SELECT} 
        Page Should Contain Link          ${AG_TARGETING_COOKIE_DETAILS_LINK}        
        ${cookie_list}=            Get List Items           ${AG_TARGETING_COOKIE_SELECT} 
        Log      Cookies List: ${cookie_list}
        List Should Contain Value            ${cookie_list}        103_carBuyer
        List Should Contain Value            ${cookie_list}        Cookie_6_7
        List Should Contain Value            ${cookie_list}        TraderJoes_5
        :FOR        ${index}            IN RANGE            1    3
        \            Enabled Checkbox ${checkbox}
        \            ${temp_selection}=               Get From List        ${cookie_list}        ${index}
        \            Log     Cookie Selection To Test: ${temp_selection}
        \            Add Targeting Cookie ${temp_selection}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            List Selection Should Be            ${AG_TARGETING_COOKIE_SELECT}          ${temp_selection}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			  Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}  
        [Tags]      EXCLUDE 
		# Exclude for now and move to Parent Adgroup Test

Validate Adgroup Targeting Location Type For Existing ONLINE Adgroup 
        Go To Test Adgroup
        ${targetting_type}=        Set Variable          targetLocationType
        ${checkbox}=                 Set Variable         ${AG_TARGETING_LOCATION_TYPE_CHECKBOX}
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label               Undetermined
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label               Away
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[3]/label               Home
        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Location Type Count: ${type_count}
        Should Be Equal       ${type_count}    3
        :FOR        ${index}      IN RANGE       1    ${type_count}+1
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}              
	[Tags]		
Validate Adgroup Targeting Language For Existing ONLINE Adgroup 
        Go To Test Adgroup
        ${targetting_type}=        	Set Variable          targetLanguage
        ${checkbox}=                Set Variable          ${AG_TARGETING_LANGUAGE_CHECKBOX} 
        Page Should Contain Checkbox      ${checkbox}
        # Ensure that we always start off with the selection being disabled regardless of what it was set to
        Disabled Checkbox ${checkbox}
        Capture Page Screenshot With Timestamp
        # Start test by enabling it and validating the options
        Enabled Checkbox ${checkbox}
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[1]/label               English
        Element Text Should Be                   //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[2]/label               Spanish

        # Loop through and try saving each option and verifying
        ${type_count}=         Get Matching Xpath Count           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li
        Log    Language Count: ${type_count}
        Should Be Equal       ${type_count}    2
        :FOR        ${index}      IN RANGE       1    ${type_count}+1
        \            Enabled Checkbox ${checkbox}
        \            ${label_text}=             Get Text           //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/label
        \            Log     Selection Text: ${label_text}
        \            ${checkbox_element}=        Set Variable          //ul[@id='targeting']/li[@id='${targetting_type}']/ul/li[${index}]/input
        \            Enabled Checkbox ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Enabled ${checkbox_element}
        \            Capture Page Screenshot With Timestamp
        \            Disabled Checkbox ${checkbox}
        \            Click Element                           ${AG_SAVE_BUTTON}
        \			 Additional Validation For Deadlock Issue
        \            Go To Test Adgroup
        \            Validate Checkbox Disabled ${checkbox}       

Clean Up All Targetting For ONLINE Adgroup
          Go To Test Adgroup
          Disable All Targetting But Placement For Online Adgroup
          Click Element                           ${AG_SAVE_BUTTON}
          Additional Validation For Deadlock Issue
          
          
          
          












