*** Settings ***
Resource             private_marketplace_imports.txt
Force Tags           BATCH9		PRIVATE		AUCTION		SPOTXCHANGE	

*** variables ***
${app_id}				REGRESSION SPOTXCHANGE PRIVATE AUCTION
${private_ag}		36453    #We use 2nd identifier Country = CAN
${public_ag}		36454	 #We use 2nd identifier Country = USA


*** Test Cases ***

#Serve ad base on matching deal id
private_auction=0, Normal ad (serve public)
		Set Test Variable		${country}				USA
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_IDx
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"private_auction":0}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${public_ag}     submit_client_impression_event=NO
	[Tags]		
private_auction=0, Ad with matching deal id 1/1(serve private)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO
	[Tags]	
private_auction=0, Ad with matching deal id 1/3(serve private)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"app":{"cat":["IAB3"],"domain":"www.smaato.com","id":"${app_id}","name":"PreferredDeal_PreferredDealSingleAuctionSuccessUATestCase_iOS_XXLARGE_320x50_IAB3","publisher":{"id":"1001000000","name":"PreferredDeal_PreferredDealSingleAuctionSuccessUATestCase_iOS_XXLARGE_320x50_IAB3"}},"badv":["8anch.com"],"bcat":["IAB7-28","IAB17-18","IAB26","IAB25","IAB7-42","IAB9-9","IAB24","IAB23","IAB11"],"device":{"connectiontype":0,"devicetype":1,"dnt":0,"ifa":"F585B1EF-D543-4F9C-A39F-A204BD9C1E33","didsha1":"03791cf87e352da6434e4d964f54f0f64db933aa","didmd5":"68b329da9893e34099c7d8ad5cb9c940","dpisha1":"bfc523f83fa54a19e7b2d8bdf8acd687a09fba09","dpimd5":"223632c428784fecaaa3e2a6aaaf6d8e","geo":{"city":"Hamburg","country":"${country}","lat":53.550003,"lon":10.0,"metro":"0","region":"04","type":2,"zip":"20099"},"ip":"95.90.255.47","js":0,"make":"Apple","model":"iPhone","os":"iOS","osv":"4.3.2","ua":"Mozilla/5.0(iPhone;U;CPUiPhoneOS4_3_2likeMacOSX;en-us)AppleWebKit/533.17.9(KHTML,likeGecko)Version/5.0.2Mobile/8H7Safari/6533.18.5"},"ext":{"carriername":"unknown-probablyWLAN","operaminibrowser":0,"udi":{"atuid":"edc22bd4-aa58-f32a-63b7-8c7fcadfb1b7","idfa":"F585B1EF-D543-4F9C-A39F-A204BD9C1E33","idfatracking":1}},"id":"FVdBNIomFK","imp":[{"banner":{"btype":[1,3],"h":50,"mimes":["image/png","image/jpeg","image/gif"],"pos":0,"w":320},"displaymanager":"SOMA","id":"1","instl":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"bidfloorcur":"USD","id":"${private_deal_id}","wseat":${private_wseat},"wadomain":${private_wadomain}},{"at":${private_at},"bidfloor":${private_bidfloor},"bidfloorcur":"USD","id":"${private_deal_id}2","wseat":${private_wseat},"wadomain":${private_wadomain}},{"at":${private_at},"bidfloor":${private_bidfloor},"bidfloorcur":"USD","id":"${private_deal_id}3","wseat":${private_wseat},"wadomain":${private_wadomain}}],"private_auction":${private_auction}},"secure":0}],"regs":{"coppa":0},"user":{}}
		RTB Request 			API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO
		[Tags]	Exclude
private_auction=0, Ad without matching deal id (serve public)
		Set Test Variable		${country}				USA
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_IDx
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 			API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${public_ag}     submit_client_impression_event=NO
	
private_auction=1, Normal Ad (not serve)
		Set Test Variable		${country}				USA
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_IDx
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 			API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=204     submit_client_impression_event=NO

private_auction=1, Ad with matching deal id 1/1(serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO

private_auction=1, Ad with matching deal id 1/3(serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 			API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO
	[Tags]	Exclude
private_auction=1, Ad without matching deal id (not serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_IDx
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 			API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=204     submit_client_impression_event=NO

#Test Bidfloor, depending on if we match deal id match.
private_auction=0, Normal ad, imp.banner.bidfloor honored (serve public)
		Set Test Variable		${country}				USA
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_IDx
		Set Test Variable		${public_bidfloor}		0.5
		Set Test Variable		${private_bidfloor}		25.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"bidfloor":${public_bidfloor},"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${public_ag}     submit_client_impression_event=NO
	[Tags]	
private_auction=0, Ad with matching deal id, pmp.deal.bidfloor honored (serve private)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${public_bidfloor}		25.5
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"bidfloor":${public_bidfloor},"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO

private_auction=0, Ad with matching deal id, pmp.deal.bidfloor missing, honored imp.banner.bidfloor(serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${public_bidfloor}		0.5
		Set Test Variable		${private_bidfloor}		25.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"bidfloor":${public_bidfloor},"pmp":{"deals":[{"at":${private_at},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO

private_auction=1, Ad with matching deal id, pmp.deal.bidfloor honored (serve private)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${public_bidfloor}		25.5
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"bidfloor":${public_bidfloor},"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO

private_auction=1, Ad with matching deal id, pmp.deal.bidfloor missing, honored imp.banner.bidfloor(serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${public_bidfloor}		0.5
		Set Test Variable		${private_bidfloor}		25.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"bidfloor":${public_bidfloor},"pmp":{"deals":[{"at":${private_at},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO
	[Tags]	
#Test Auction Type
private_auction=0, Normal ad, dont care about AT=1 (serve public)
		Set Test Variable		${country}				USA
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_IDx
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			1	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${public_ag}     submit_client_impression_event=NO

private_auction=0, Ad with matching deal id, first price AT=1 (don't serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			1	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=204  	   submit_client_impression_event=NO

private_auction=0, Ad with matching deal id, second price AT=2 (serve private)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO

private_auction=0, Ad with matching deal id, fixed price AT=3 (don't serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			1	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=204  	   submit_client_impression_event=NO

private_auction=0, Ad with matching deal id, second price AT missing (serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		#Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO

private_auction=1, Ad with matching deal id, first price AT=1 (don't serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			1	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=204  	   submit_client_impression_event=NO

private_auction=1, Ad with matching deal id, second price AT=2 (serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO

private_auction=1, Ad with matching deal id, fixed price AT=3 (don't serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			1	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=204  	   submit_client_impression_event=NO

private_auction=1, Ad with matching deal id, second price AT missing (serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		#Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO
	[Tags]	
#Test wadomain , spotx do not use wadomain
#Test wseat, spotx do not use wseat

private_auction=0, Normal ad, validate response without deal id (serve)
		Set Test Variable		${country}				USA
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_IDx
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${public_ag}     submit_client_impression_event=NO
		Should Not Match Regexp		${response_content}		"dealid"

private_auction=0, Matching Deal ID, validate response with deal id (serve private)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO
		Should Match Regexp		${response_content}		"dealid":"${private_deal_id}"

private_auction=1, Matching Deal ID, validate response with deal id (serve)
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=NO
		Should Match Regexp		${response_content}		"dealid":"${private_deal_id}"

private_auction=0, Matching Deal ID, events log contain private parameter=0 (serve)
		${device_id}=		Generate Clear Device ID
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		0
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=VAST
	   Start Read Event Logs For Reqid		host=${EVENT_ENGINE}	reqid=${reqid}
	   Should Match Regexp 			${output}  				36=${private_deal_id}
	[Tags]		
private_auction=1, Matching Deal ID, events log contain private parameter=1 (serve)
		${device_id}=		Generate Clear Device ID
		Set Test Variable		${country}				CAN
		Set Test Variable		${private_auction}		1
		Set Test Variable		${private_deal_id}		Private_Auction_ID
		Set Test Variable		${private_bidfloor}		0.5
		Set Test Variable		${private_at}			2	
		Set Test Variable		${private_wadomain}		["4info.com","abc.com"]
		Set Test Variable		${private_wseat}		[]
		Set Test Variable 		${data}		{"device":{"os":"android","dnt":0,"ua":"Dalvik/2.1.0 (Linux; U; Android 6.0.1; SM-G920P Build/MMB29K)","ifa":"63268888-1bbe-4b2e-9a93-23a411ffd2e0","geo":{"country":"${country}","lat":35.7382,"lon":-79.769,"region":"US-NC"},"devicetype":4,"ip":"66.87.132.186","make":"Sprint","model":"SM-G920P","osv":"6.0.1","ext":{"lmt":0},"dpidsha1":"ff581693f7de23423ee4066a91bdeb48e2ef8653","dpidmd5":"ac503eb326c0345db4bbe808ab1d4b01"},"app":{"name":"Tubi TV - Free Movies & TV","domain":"http://xtubitv.com","cat":["IAB1"],"ver":"2.8","bundle":"xcom.tubitv","privacypolicy":1,"id":"${app_id}","storeurl":"https://play.google.com/store/apps/details?id=com.tubitv&hl=en&gl=us","content":{"videoquality":0,"qagmediarating":2},"ext":{"channelid":"136300","mediarating":"4.1","store_foreign_app_id":"com.tubitv"},"paid":0,"publisher":{"id":"84953","domain":"tubitv.com"}},"id":"fe0d44e794a811e6bf1f10fc3bb90001","imp":[{"id":"1","tagid":"http://search.spotxchange.com/vast/2.0/136300?VPI=MP4&VMaxd=90&player_width=2560&player_height=1440&app[name]=tubitv&app[domain]=http%3A%2F%2Ftubitv.com&app[cat]=IAB1&app[ver]=2.7.2&app[bundle]=com.tubitv&app[privacypolicy]=1&device[os]=android&device[dnt]=0&device[lmt]=0&device[ua]=Dalvik%2F2.1.0+%28Linux%3B+U%3B+Android+6.0.1%3B+SM-G920P+Build%2FMMB29K%29&device[ifa]=63268888-1bbe-4b2e-9a93-23a411ffd2e0&ip_addr=66.87.132.186&device[geo][country]=US&device[geo][lat]=35.7382&device[geo][lon]=-79.7690&cb=20161017203245","video":{"mimes":["video/mp4"],"linearity":1,"minduration":1,"maxduration":90,"startdelay":0,"delivery":[2],"companionad":[{"w":300,"h":250,"id":"1"}],"companiontype":[1,2,3],"ext":{"initiationtype":3,"spxplayersize":3},"w":2560,"h":1440,"protocols":[2,5]},"secure":0,"pmp":{"deals":[{"at":${private_at},"bidfloor":${private_bidfloor},"ext":{"priority":"1"},"id":"${private_deal_id}"}],"private_auction":${private_auction}}}],"at":2,"tmax":500,"user":{"id":"d914a3ba-8386-11e6-9096-107931b70001"}}
		RTB Request 				API=${RTB_SPOTXCHANGE_API}          data=${data}		response_code=200  	adgroup_expected=${private_ag}     submit_client_impression_event=VAST
	   Start Read Event Logs For Reqid		host=${EVENT_ENGINE}	reqid=${reqid}
	   Should Match Regexp 			${output}  				36=${private_deal_id}


